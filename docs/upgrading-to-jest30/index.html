<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-30.0 docs-doc-page docs-doc-id-upgrading-to-jest30" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">From v29 to v30 · Jest</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://jest.qubitpi.org/img/opengraph.png"><meta data-rh="true" name="twitter:image" content="https://jest.qubitpi.org/img/opengraph.png"><meta data-rh="true" property="og:url" content="https://jest.qubitpi.org/docs/upgrading-to-jest30"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="ja"><meta data-rh="true" property="og:locale:alternate" content="es_ES"><meta data-rh="true" property="og:locale:alternate" content="fr"><meta data-rh="true" property="og:locale:alternate" content="pt_BR"><meta data-rh="true" property="og:locale:alternate" content="ro"><meta data-rh="true" property="og:locale:alternate" content="ru"><meta data-rh="true" property="og:locale:alternate" content="uk"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="30.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-30.0"><meta data-rh="true" name="docsearch:version" content="30.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-30.0"><meta data-rh="true" property="og:title" content="From v29 to v30 · Jest"><meta data-rh="true" name="description" content="Upgrading Jest from v29 to v30? This guide aims to help refactoring your configuration and tests."><meta data-rh="true" property="og:description" content="Upgrading Jest from v29 to v30? This guide aims to help refactoring your configuration and tests."><link data-rh="true" rel="icon" href="/img/favicon/favicon.ico"><link data-rh="true" rel="canonical" href="https://jest.qubitpi.org/docs/upgrading-to-jest30"><link data-rh="true" rel="alternate" href="https://jest.qubitpi.org/docs/upgrading-to-jest30" hreflang="en"><link data-rh="true" rel="alternate" href="https://jest.qubitpi.org/ja/docs/upgrading-to-jest30" hreflang="ja"><link data-rh="true" rel="alternate" href="https://jest.qubitpi.org/es-ES/docs/upgrading-to-jest30" hreflang="es-ES"><link data-rh="true" rel="alternate" href="https://jest.qubitpi.org/fr/docs/upgrading-to-jest30" hreflang="fr"><link data-rh="true" rel="alternate" href="https://jest.qubitpi.org/pt-BR/docs/upgrading-to-jest30" hreflang="pt-BR"><link data-rh="true" rel="alternate" href="https://jest.qubitpi.org/ro/docs/upgrading-to-jest30" hreflang="ro"><link data-rh="true" rel="alternate" href="https://jest.qubitpi.org/ru/docs/upgrading-to-jest30" hreflang="ru"><link data-rh="true" rel="alternate" href="https://jest.qubitpi.org/uk/docs/upgrading-to-jest30" hreflang="uk"><link data-rh="true" rel="alternate" href="https://jest.qubitpi.org/zh-Hans/docs/upgrading-to-jest30" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://jest.qubitpi.org/docs/upgrading-to-jest30" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HP439UUSOL-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Jest RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Jest Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44373548-17"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-44373548-17",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Jest" href="/opensearch.xml">

<link rel="icon" href="/img/jest.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#FFF">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/img/jest.png">
<link rel="mask-icon" href="/img/jest.svg" color="#15c213">
<meta name="msapplication-TileImage" content="/img/jest.png">
<meta name="msapplication-TileColor" content="#000"><link rel="stylesheet" href="/assets/css/styles.a732792e.css">
<script src="/assets/js/runtime~main.482d5db4.js" defer="defer"></script>
<script src="/assets/js/main.fe852cad.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_oPtH" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_zJRd" style="background-color:#20232a;color:#fff" role="banner"><div class="content_bSb_ announcementBarContent_t7IR">⚠️ This site (jest.qubitpi.org) is NOT the official Jest documentation and is used for the purpose of personal study only! The official Jest documentation is at <a target="_blank" rel="noopener noreferrer" href="https://jestjs.io/">jestjs.io</a>. ⚠️</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Jest</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/upgrading-to-jest30">30.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/upgrading-to-jest30">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/upgrading-to-jest30">30.0</a></li><li><a class="dropdown__link" href="/docs/29.7/getting-started">29.7</a></li><li><a href="https://jest-archive-august-2023.netlify.app/docs/29.6/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link">29.6<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://jest-archive-august-2023.netlify.app/docs/29.5/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link">29.5<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://jest-archive-august-2023.netlify.app/docs/29.4/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link">29.4<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://jest-archive-august-2023.netlify.app/docs/29.3/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link">29.3<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://jest-archive-august-2023.netlify.app/docs/29.2/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link">29.2<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://jest-archive-august-2023.netlify.app/docs/29.1/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link">29.1<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://jest-archive-august-2023.netlify.app/docs/29.0/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link">29.0<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://jest-archive-august-2023.netlify.app/docs/28.x/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link">28.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://jest-archive-august-2023.netlify.app/docs/27.x/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link">27.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://jest-archive-august-2023.netlify.app/docs/26.x/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link">26.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://jest-archive-august-2023.netlify.app/docs/25.x/getting-started/" target="_blank" rel="noopener noreferrer" class="dropdown__link">25.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://archive.jestjs.io/docs/en/24.x/getting-started.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">24.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://archive.jestjs.io/docs/en/23.x/getting-started.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">23.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://archive.jestjs.io/docs/en/22.x/getting-started.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">22.x<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/docs/api">API</a><a class="navbar__item navbar__link" href="/help">Help</a><a class="navbar__item navbar__link" href="/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_kvP7"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/upgrading-to-jest30" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/ja/docs/upgrading-to-jest30" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/es-ES/docs/upgrading-to-jest30" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es-ES">Español</a></li><li><a href="/fr/docs/upgrading-to-jest30" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">Français</a></li><li><a href="/pt-BR/docs/upgrading-to-jest30" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="pt-BR">Português (Brasil)</a></li><li><a href="/ro/docs/upgrading-to-jest30" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ro">Română</a></li><li><a href="/ru/docs/upgrading-to-jest30" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ru">Русский</a></li><li><a href="/uk/docs/upgrading-to-jest30" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="uk">Українська</a></li><li><a href="/zh-Hans/docs/upgrading-to-jest30" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/jestjs/jest" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_bzqh"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r"><div class="docsWrapper__sE8"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_iEvu" type="button"></button><div class="docRoot_DfVB"><aside class="theme-doc-sidebar-container docSidebarContainer_c7NB"><div class="sidebarViewport_KYo0"><div class="sidebar_CUen"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_jmj1 menuWithAnnouncementBar_YufC"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/getting-started">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/snapshot-testing">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/tutorial-react">Framework Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/upgrading-to-jest29">Upgrade Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/upgrading-to-jest29">From v28 to v29</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/upgrading-to-jest30">From v29 to v30</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_oTwn"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_pMEX"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_a9sJ"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_Qr34"><div class="docItemContainer_tjFy"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_T5ub" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_sfvy"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Upgrade Guides</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">From v29 to v30</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 30.0</span><div class="tocCollapsible_wXna theme-doc-toc-mobile tocMobile_Ojys"><button type="button" class="clean-btn tocCollapsibleButton_iI2p">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>From v29 to v30</h1></header><p>Upgrading Jest from v29 to v30? This guide aims to help refactoring your configuration and tests.</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>See <a href="https://github.com/jestjs/jest/blob/main/CHANGELOG.md#3000" target="_blank" rel="noopener noreferrer">changelog</a> for the full list of changes.</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_WCGJ alert alert--secondary"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_pbrs"><p>Upgrading from an older version? You can see the upgrade guide from v28 to v29 <a href="/docs/upgrading-to-jest29">here</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="compatibility">Compatibility<a href="#compatibility" class="hash-link" aria-label="Direct link to Compatibility" title="Direct link to Compatibility">​</a></h2>
<ul>
<li>Jest 30 drops support for Node 14, 16, 19, and 21. The minimum supported Node versions are now 18.x. Ensure your environment is using a compatible Node release before upgrading.</li>
<li>The minimum TypeScript version is now 5.4. Update TypeScript, if you are using type definitions of Jest (or any of its packages).</li>
<li>The <code>jest-environment-jsdom</code> package now uses JSDOM v26. This update may introduce behavior changes in the DOM environment. If you encounter differences in DOM behavior or new warnings, refer to the JSDOM release notes for <a href="https://github.com/jsdom/jsdom/compare/21.0.0...26.0.0" target="_blank" rel="noopener noreferrer">v21–26</a>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="jest-expect--matchers">Jest Expect &amp; Matchers<a href="#jest-expect--matchers" class="hash-link" aria-label="Direct link to Jest Expect &amp; Matchers" title="Direct link to Jest Expect &amp; Matchers">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="removal-of-alias-matcher-functions">Removal of Alias Matcher Functions<a href="#removal-of-alias-matcher-functions" class="hash-link" aria-label="Direct link to Removal of Alias Matcher Functions" title="Direct link to Removal of Alias Matcher Functions">​</a></h3>
<p>All <em>alias</em> matcher names have been removed in favor of their primary names. If you have been using older, deprecated matcher names, you will need to update your tests:</p>
<ul>
<li><strong>Removed aliases and their replacements:</strong>
<ul>
<li><code>expect(fn).toBeCalled()</code> <strong>→</strong> <code>expect(fn).toHaveBeenCalled()</code></li>
<li><code>expect(fn).toBeCalledTimes(n)</code> <strong>→</strong> <code>expect(fn).toHaveBeenCalledTimes(n)</code></li>
<li><code>expect(fn).toBeCalledWith(arg)</code> <strong>→</strong> <code>expect(fn).toHaveBeenCalledWith(arg)</code></li>
<li><code>expect(fn).lastCalledWith(arg)</code> <strong>→</strong> <code>expect(fn).toHaveBeenLastCalledWith(arg)</code></li>
<li><code>expect(fn).nthCalledWith(n, arg)</code> <strong>→</strong> <code>expect(fn).toHaveBeenNthCalledWith(n, arg)</code></li>
<li><code>expect(fn).toReturn()</code> <strong>→</strong> <code>expect(fn).toHaveReturned()</code></li>
<li><code>expect(fn).toReturnTimes(n)</code> <strong>→</strong> <code>expect(fn).toHaveReturnedTimes(n)</code></li>
<li><code>expect(fn).toReturnWith(val)</code> <strong>  →</strong> <code>expect(fn).toHaveReturnedWith(val)</code></li>
<li><code>expect(fn).lastReturnedWith(val)</code> <strong>→</strong> <code>expect(fn).toHaveLastReturnedWith(val)</code></li>
<li><code>expect(fn).nthReturnedWith(n, val)</code> <strong>→</strong> <code>expect(fn).toHaveNthReturnedWith(n, val)</code></li>
<li><code>expect(func).toThrowError(message)</code> <strong>→</strong> <code>expect(func).toThrow(message)</code></li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>These alias methods were deprecated since Jest 26, and in Jest 30 they are fully removed. Perform a global search-and-replace in your codebase to update to the canonical matcher names. The functionality is identical — only the method names have changed. (If you use ESLint with <code>eslint-plugin-jest</code>, the <a href="https://github.com/jest-community/eslint-plugin-jest/blob/HEAD/docs/rules/no-alias-methods.md" target="_blank" rel="noopener noreferrer"><code>no-alias-methods</code></a> rule can help automate this replacement.)</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="non-enumerable-properties">Non-enumerable properties<a href="#non-enumerable-properties" class="hash-link" aria-label="Direct link to Non-enumerable properties" title="Direct link to Non-enumerable properties">​</a></h3>
<p>Non-enumerable object properties are now excluded from object matchers by default. This could affect <code>expect.objectContaining</code> or equality checks.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="improved-type-inference-for-calledwith">Improved Type Inference for CalledWith<a href="#improved-type-inference-for-calledwith" class="hash-link" aria-label="Direct link to Improved Type Inference for CalledWith" title="Direct link to Improved Type Inference for CalledWith">​</a></h3>
<p>TypeScript users: The types for the <code>CalledWith</code> family of matchers (e.g. <code>toHaveBeenCalledWith</code>) have been improved to infer function parameter types. In most cases this will catch type mismatches more accurately. This is a <strong>compile-time</strong> breaking change.</p>
<p>If you were asserting calls with arguments that don’t match the actual function’s parameter types, TypeScript may now error on those tests. For example, if a function is typed to accept a number and you wrote <code>expect(fn).toHaveBeenCalledWith(&quot;string&quot;)</code>, TypeScript 5 + Jest 30’s types will flag this. The runtime behavior of the matcher is unchanged.</p>
<p>To fix new TypeScript errors, ensure your test arguments align with the function’s expected types (or use type casts if you intentionally call with different types).</p>
<p>This change doesn’t impact runtime, but it can surface new type errors in your tests that were previously unnoticed, making your tests more type-safe.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="configuration-updates">Configuration Updates<a href="#configuration-updates" class="hash-link" aria-label="Direct link to Configuration Updates" title="Direct link to Configuration Updates">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="support-for-mts-and-cts-file-extensions">Support for <code>.mts</code> and <code>.cts</code> File Extensions<a href="#support-for-mts-and-cts-file-extensions" class="hash-link" aria-label="Direct link to support-for-mts-and-cts-file-extensions" title="Direct link to support-for-mts-and-cts-file-extensions">​</a></h3>
<p>Jest 30 expands support for ESM and TypeScript module file extensions:</p>
<ul>
<li>The default <code>moduleFileExtensions</code> now include <code>.mts</code> and <code>.cts</code> (TypeScript ESM and CommonJS modules) in addition to the usual extensions.</li>
<li>The default <code>testMatch</code> and <code>testRegex</code> patterns have been updated to recognize <code>.mjs</code>, <code>.cjs</code>, <code>.mts</code>, and <code>.cts</code> files as test files.</li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>If your project contains files with these extensions that are <strong>not</strong> intended to be treated as modules or tests, you may need to adjust your configuration. Conversely, if you have test files with these extensions, Jest will now detect them by default (you may remove custom configuration that was previously needed to include them).</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="--testpathpattern-was-renamed-to---testpathpatterns"><code>--testPathPattern</code> was renamed to <code>--testPathPatterns</code><a href="#--testpathpattern-was-renamed-to---testpathpatterns" class="hash-link" aria-label="Direct link to --testpathpattern-was-renamed-to---testpathpatterns" title="Direct link to --testpathpattern-was-renamed-to---testpathpatterns">​</a></h3>
<p>If you filter tests by path, note that the CLI flag has changed: The <code>--testPathPattern</code> flag is now <code>--testPathPatterns</code>. You can pass multiple patterns by separating them with spaces or by repeating the flag. For example:</p>
<div class="language-bash codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f6f6"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-bash codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Old (Jest 29)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jest </span><span class="token parameter variable" style="color:#1373c2">--testPathPattern</span><span class="token operator" style="color:#888">=</span><span class="token string" style="color:#c21325">&quot;unit/.*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># New (Jest 30)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">jest </span><span class="token parameter variable" style="color:#1373c2">--testPathPatterns</span><span class="token plain"> </span><span class="token string" style="color:#c21325">&quot;unit/.*&quot;</span><span class="token plain"> </span><span class="token string" style="color:#c21325">&quot;integration/.*&quot;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Internally, Jest consolidates these patterns into a <code>TestPathPatterns</code> object. If you were programmatically calling Jest’s watch mode with a <code>testPathPattern</code>, you must now construct a <code>TestPathPatterns</code> instance instead.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="removed---init-command">Removed <code>--init</code> Command<a href="#removed---init-command" class="hash-link" aria-label="Direct link to removed---init-command" title="Direct link to removed---init-command">​</a></h3>
<p>The interactive config initialization command <code>jest --init</code> has been <strong>removed</strong>. This deprecated command was used to scaffold a Jest configuration file. If you need to create a config, you can run:</p>
<div class="language-bash codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f6f6"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-bash codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#6b2e85">npm</span><span class="token plain"> init jest@latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Or for Yarn</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#6b2e85">yarn</span><span class="token plain"> create jest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Or for pnpm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#6b2e85">pnpm</span><span class="token plain"> create jest</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="other-cli-changes">Other CLI Changes<a href="#other-cli-changes" class="hash-link" aria-label="Direct link to Other CLI Changes" title="Direct link to Other CLI Changes">​</a></h3>
<ul>
<li>Jest now validates CLI flags that require arguments to ensure an argument is provided. For example, if you use <code>--maxWorkers</code> or <code>--selectProjects</code>, you must include a value (e.g. <code>--maxWorkers=50%</code>). Previously, Jest might have allowed certain flags without a value (falling back to defaults); now it will throw an error if the value is missing. Ensure any scripts or npm commands passing Jest flags include the necessary arguments.</li>
<li>If you use the <code>--filter</code> option to filter test files (an advanced use-case where you provide a path to a filter implementation), the expected interface has changed. The filter function should now return an object of shape <code>{filtered: Array&lt;string&gt;}</code>, matching the documented format. In prior versions, a different return format may have been accepted (e.g., returning an array directly). Update any custom test filter functions to return an object with a <code>filtered</code> property as documented.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="test-runner-behavior-changes">Test Runner Behavior Changes<a href="#test-runner-behavior-changes" class="hash-link" aria-label="Direct link to Test Runner Behavior Changes" title="Direct link to Test Runner Behavior Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="unhandled-promise-rejections-in-tests">Unhandled Promise Rejections in Tests<a href="#unhandled-promise-rejections-in-tests" class="hash-link" aria-label="Direct link to Unhandled Promise Rejections in Tests" title="Direct link to Unhandled Promise Rejections in Tests">​</a></h3>
<p>Jest includes a fix to properly handle promises that are rejected and later caught, to avoid false test failures. In Jest 29, a promise rejection that was handled asynchronously (after the test tick) could still cause the test to fail erroneously. Jest 30 now waits an extra event loop turn to confirm that a promise rejection remains unhandled before failing a test.</p>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>You should see fewer false positives for unhandled promise rejections. Tests that previously failed due to async handled rejections should now pass. However, this change can slightly slow down test completion, especially in tests that intentionally reject promises. To mitigate performance impact, a new configuration flag <code>waitForUnhandledRejections</code> was introduced. This flag, when disabled, can restore the previous behavior (not waiting) if absolutely needed. Most users should not need to change this – the default now favors correctness by preventing false failures.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="custom-test-sequencers">Custom Test Sequencers<a href="#custom-test-sequencers" class="hash-link" aria-label="Direct link to Custom Test Sequencers" title="Direct link to Custom Test Sequencers">​</a></h3>
<p>If you have a <strong>custom test sequencer</strong> (a class inheriting from Jest’s <code>TestSequencer</code>), you’ll need to update it for Jest 30. Jest now passes additional context to the test sequencer. Specifically, the <code>TestSequencer</code> API was extended to expose the <code>globalConfig</code> and <code>contexts</code> to your sequencer.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="required-globalconfig-in-runtime">Required <code>globalConfig</code> in Runtime<a href="#required-globalconfig-in-runtime" class="hash-link" aria-label="Direct link to required-globalconfig-in-runtime" title="Direct link to required-globalconfig-in-runtime">​</a></h3>
<p>For those using Jest’s programmatic APIs: constructing a <code>Runtime</code> now requires a <code>globalConfig</code> parameter. If you use <code>jest.runCLI</code> or similar helpers, make sure you pass all required options as per the updated API. (The typical <code>jest</code> CLI or <code>npm test</code> usage is unaffected by this change.)</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="snapshots-and-output-changes">Snapshots and Output Changes<a href="#snapshots-and-output-changes" class="hash-link" aria-label="Direct link to Snapshots and Output Changes" title="Direct link to Snapshots and Output Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="update-broken-documentation-link">Update broken documentation link<a href="#update-broken-documentation-link" class="hash-link" aria-label="Direct link to Update broken documentation link" title="Direct link to Update broken documentation link">​</a></h3>
<p>Deprecated goo.gl URL is removed from snapshot tests. This change updates existing snapshots to replace any goo.gl links with full, unshortened URLs.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="error-causes-in-snapshots">Error Causes in Snapshots<a href="#error-causes-in-snapshots" class="hash-link" aria-label="Direct link to Error Causes in Snapshots" title="Direct link to Error Causes in Snapshots">​</a></h3>
<p>Error serialization in snapshots has changed. Jest 30’s snapshot serializer will now include an <code>Error</code>’s <strong><code>cause</code></strong> property (if present) when printing errors.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="react-empty-string-rendering">React Empty String Rendering<a href="#react-empty-string-rendering" class="hash-link" aria-label="Direct link to React Empty String Rendering" title="Direct link to React Empty String Rendering">​</a></h3>
<p>The React-specific snapshot serializer no longer renders empty string children (<code>&quot;&quot;</code>) in the output. In Jest 29, an empty string child in a React element might appear as <code>&quot;&quot;</code> in the snapshot output; in Jest 30 it will be omitted (treated as no content).</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="improved-object-printing-in-pretty-format">Improved Object Printing in <code>pretty-format</code><a href="#improved-object-printing-in-pretty-format" class="hash-link" aria-label="Direct link to improved-object-printing-in-pretty-format" title="Direct link to improved-object-printing-in-pretty-format">​</a></h3>
<p><code>ArrayBuffer</code> and <code>DataView</code> are now printed in a human-readable way instead of as objects with internal fields.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="jest-mock-api-changes">Jest Mock API Changes<a href="#jest-mock-api-changes" class="hash-link" aria-label="Direct link to Jest Mock API Changes" title="Direct link to Jest Mock API Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="jestgenmockfrommodule-removed"><code>jest.genMockFromModule</code> Removed<a href="#jestgenmockfrommodule-removed" class="hash-link" aria-label="Direct link to jestgenmockfrommodule-removed" title="Direct link to jestgenmockfrommodule-removed">​</a></h3>
<p>The legacy function <code>jest.genMockFromModule(moduleName)</code> has been removed. It was previously deprecated in favor of <code>jest.createMockFromModule(moduleName)</code>. If you still use <code>genMockFromModule</code>, switch to <code>createMockFromModule</code> – the behavior is the same. For example:</p>
<p>Old code (Jest 29):</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f6f6"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#297a29">const</span><span class="token plain"> mockFs </span><span class="token operator" style="color:#888">=</span><span class="token plain"> jest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#6b2e85">genMockFromModule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#c21325">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>New code (Jest 30):</p>
<div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f6f6"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#297a29">const</span><span class="token plain"> mockFs </span><span class="token operator" style="color:#888">=</span><span class="token plain"> jest</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#6b2e85">createMockFromModule</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#c21325">&#x27;fs&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="removed-mock-function-types">Removed Mock Function Types<a href="#removed-mock-function-types" class="hash-link" aria-label="Direct link to Removed Mock Function Types" title="Direct link to Removed Mock Function Types">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_WCGJ alert alert--info"><div class="admonitionHeading_GCBg"><span class="admonitionIcon_L39b"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_pbrs"><p>The type changes are only applicable if you explicitly import Jest APIs:</p><div class="language-ts codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f6f6"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-ts codeBlock_RMoD thin-scrollbar" style="color:#393A34;background-color:#f6f6f6"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#297a29">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">expect</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> jest</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> test</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#297a29">from</span><span class="token plain"> </span><span class="token string" style="color:#c21325">&#x27;@jest/globals&#x27;</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_FoOz"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_L0B6"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<p>Some TypeScript types related to mock functions have been removed from the public API.</p>
<ul>
<li><code>MockFunctionMetadata</code></li>
<li><code>MockFunctionMetadataType</code></li>
<li><code>SpyInstance</code></li>
</ul>
<p>If you were using <code>jest.SpyInstance</code> (for instance, to annotate the return of <code>jest.spyOn</code>), you should update to using <a href="/docs/mock-function-api#jestspiedsource"><code>jest.Spied</code></a>.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="module--runtime-changes">Module &amp; Runtime Changes<a href="#module--runtime-changes" class="hash-link" aria-label="Direct link to Module &amp; Runtime Changes" title="Direct link to Module &amp; Runtime Changes">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="esm-module-support-and-internal-restructuring">ESM Module Support and Internal Restructuring<a href="#esm-module-support-and-internal-restructuring" class="hash-link" aria-label="Direct link to ESM Module Support and Internal Restructuring" title="Direct link to ESM Module Support and Internal Restructuring">​</a></h3>
<p>Jest has introduced significant under-the-hood changes to how its packages are bundled and exported:</p>
<ul>
<li>All of Jest’s internal modules are now bundled into single files for faster startup. This means when you install Jest, the number of files it loads is greatly reduced (improving performance). However, a side effect is that any unofficial deep imports into Jest’s packages will likely break. For example, if you previously did something like <code>require(&#x27;jest-runner/build/testWorker&#x27;)</code> (which is not a public API), this path will no longer exist. <strong>Solution:</strong> Use Jest’s public APIs or documented interfaces only. If you are relying on an internal module that you think should be part of the public API, please open a Pull Request to expose it.</li>
<li>Jest’s packages now provide ESM wrappers. This is part of ongoing work to allow running Jest in an ESM context. All official Jest packages export themselves properly via the <code>package.json</code> <code>&quot;exports&quot;</code> field. For most users, this has no direct impact – you continue to use Jest the same way. But if you maintain a tool or plugin that imports Jest’s modules, ensure you use the package names as imports (which will resolve via Node’s module resolution).</li>
</ul>
<p>These changes are considered breaking for anyone poking at Jest’s internals, but <strong>not</strong> for typical usage of the Jest CLI and config. After upgrading, run your tests normally – if you get module resolution errors related to Jest’s own modules, it’s likely due to an unsupported import that needs to be removed or updated.</p>
<h3 class="anchor anchorWithStickyNavbar_JmGV" id="glob-pattern-matching-changes">Glob Pattern Matching Changes<a href="#glob-pattern-matching-changes" class="hash-link" aria-label="Direct link to Glob Pattern Matching Changes" title="Direct link to Glob Pattern Matching Changes">​</a></h3>
<p>Jest’s dependency for file pattern matching (<code>glob</code>) has been upgraded to v10. Glob v10 may have slight differences in pattern syntax and behavior.</p>
<p>One notable change is that <code>glob@10</code> treats brace expansions and extglobs a bit differently and is stricter about some patterns. If you have custom <code>testMatch</code> patterns, <code>moduleNameMapper</code> patterns, or other glob-based config, they should continue to work in most cases. Just be aware that if a pattern isn’t matching files as it used to, you might need to adjust it for the new glob engine.</p>
<h2 class="anchor anchorWithStickyNavbar_JmGV" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>Upgrade to Jest 30 by first ensuring your environment meets the new Node.js and TypeScript requirements. Update your Jest configuration file and CLI usage for the renamed and removed options (notably <code>testPathPatterns</code> and the removal of <code>--init</code>). Run your test suite and address any failures:</p>
<ul>
<li>Fix tests using removed matcher aliases by replacing them with the official matcher names.</li>
<li>Update any snapshots that fail due to the formatting changes (error causes, empty strings, etc.).</li>
<li>Pay attention to TypeScript compiler errors – they will guide you to update deprecated API usage (like <code>genMockFromModule</code> or removed types) and adjust tests where types are now stricter.</li>
</ul>
<p>Happy testing!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/jestjs/jest/edit/main/website/versioned_docs/version-30.0/UpgradingToJest30.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_ydrU"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-07-04T02:10:29.000Z" itemprop="dateModified">Jul 4, 2025</time></b> by <b>Jiaqi Liu</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/upgrading-to-jest29"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">From v28 to v29</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_XG6w thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#compatibility" class="table-of-contents__link toc-highlight">Compatibility</a></li><li><a href="#jest-expect--matchers" class="table-of-contents__link toc-highlight">Jest Expect &amp; Matchers</a><ul><li><a href="#removal-of-alias-matcher-functions" class="table-of-contents__link toc-highlight">Removal of Alias Matcher Functions</a></li><li><a href="#non-enumerable-properties" class="table-of-contents__link toc-highlight">Non-enumerable properties</a></li><li><a href="#improved-type-inference-for-calledwith" class="table-of-contents__link toc-highlight">Improved Type Inference for CalledWith</a></li></ul></li><li><a href="#configuration-updates" class="table-of-contents__link toc-highlight">Configuration Updates</a><ul><li><a href="#support-for-mts-and-cts-file-extensions" class="table-of-contents__link toc-highlight">Support for <code>.mts</code> and <code>.cts</code> File Extensions</a></li><li><a href="#--testpathpattern-was-renamed-to---testpathpatterns" class="table-of-contents__link toc-highlight"><code>--testPathPattern</code> was renamed to <code>--testPathPatterns</code></a></li><li><a href="#removed---init-command" class="table-of-contents__link toc-highlight">Removed <code>--init</code> Command</a></li><li><a href="#other-cli-changes" class="table-of-contents__link toc-highlight">Other CLI Changes</a></li></ul></li><li><a href="#test-runner-behavior-changes" class="table-of-contents__link toc-highlight">Test Runner Behavior Changes</a><ul><li><a href="#unhandled-promise-rejections-in-tests" class="table-of-contents__link toc-highlight">Unhandled Promise Rejections in Tests</a></li><li><a href="#custom-test-sequencers" class="table-of-contents__link toc-highlight">Custom Test Sequencers</a></li><li><a href="#required-globalconfig-in-runtime" class="table-of-contents__link toc-highlight">Required <code>globalConfig</code> in Runtime</a></li></ul></li><li><a href="#snapshots-and-output-changes" class="table-of-contents__link toc-highlight">Snapshots and Output Changes</a><ul><li><a href="#update-broken-documentation-link" class="table-of-contents__link toc-highlight">Update broken documentation link</a></li><li><a href="#error-causes-in-snapshots" class="table-of-contents__link toc-highlight">Error Causes in Snapshots</a></li><li><a href="#react-empty-string-rendering" class="table-of-contents__link toc-highlight">React Empty String Rendering</a></li><li><a href="#improved-object-printing-in-pretty-format" class="table-of-contents__link toc-highlight">Improved Object Printing in <code>pretty-format</code></a></li></ul></li><li><a href="#jest-mock-api-changes" class="table-of-contents__link toc-highlight">Jest Mock API Changes</a><ul><li><a href="#jestgenmockfrommodule-removed" class="table-of-contents__link toc-highlight"><code>jest.genMockFromModule</code> Removed</a></li><li><a href="#removed-mock-function-types" class="table-of-contents__link toc-highlight">Removed Mock Function Types</a></li></ul></li><li><a href="#module--runtime-changes" class="table-of-contents__link toc-highlight">Module &amp; Runtime Changes</a><ul><li><a href="#esm-module-support-and-internal-restructuring" class="table-of-contents__link toc-highlight">ESM Module Support and Internal Restructuring</a></li><li><a href="#glob-pattern-matching-changes" class="table-of-contents__link toc-highlight">Glob Pattern Matching Changes</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/snapshot-testing">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api">API Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.reactiflux.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reactiflux<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/jestjs_" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/jestjs/jest" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/jestjs_" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://openjsf.org/" rel="noopener noreferrer" class="footerLogoLink_tutC"><img src="/img/openjs_foundation-logo-horizontal-color-dark_background.svg" alt="OpenJS Foundation Logo" class="footer__logo themedComponent_siVc themedComponent--light_hHel"><img src="/img/openjs_foundation-logo-horizontal-color-dark_background.svg" alt="OpenJS Foundation Logo" class="footer__logo themedComponent_siVc themedComponent--dark_yETr"></a></div><div class="footer__copyright"><p>Copyright <a href="https://openjsf.org">OpenJS Foundation</a> and Jest contributors. All rights reserved. The <a href="https://openjsf.org">OpenJS Foundation</a> has registered trademarks and uses trademarks.  For a list of trademarks of the <a href="https://openjsf.org">OpenJS Foundation</a>, please see our <a href="https://trademark-policy.openjsf.org">Trademark Policy</a> and <a href="https://trademark-list.openjsf.org">Trademark List</a>.  Trademarks and logos not indicated on the <a href="https://trademark-list.openjsf.org">list of OpenJS Foundation trademarks</a> are trademarks&trade; or registered&reg; trademarks of their respective holders. Use of them does not imply any affiliation with or endorsement by them.</p>
<p><a href="https://openjsf.org">The OpenJS Foundation</a> | <a href="https://terms-of-use.openjsf.org">Terms of Use</a> | <a href="https://privacy-policy.openjsf.org">Privacy Policy</a> | <a href="https://bylaws.openjsf.org">Bylaws</a> | <a href="https://code-of-conduct.openjsf.org">Code of Conduct</a> | <a href="https://trademark-policy.openjsf.org">Trademark Policy</a> | <a href="https://trademark-list.openjsf.org">Trademark List</a> | <a href="https://www.linuxfoundation.org/cookies">Cookie Policy</a></p>Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>