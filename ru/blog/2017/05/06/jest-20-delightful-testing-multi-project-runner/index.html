<!doctype html>
<html lang="ru" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.0">
<title data-rh="true">Jest 20: 💖 Delightful Testing &amp; 🏃🏽 Multi-Project-Runner · Jest</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://QubitPi.github.io/jest/ru/img/opengraph.png"><meta data-rh="true" name="twitter:image" content="https://QubitPi.github.io/jest/ru/img/opengraph.png"><meta data-rh="true" property="og:url" content="https://QubitPi.github.io/jest/ru/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner"><meta data-rh="true" name="docusaurus_locale" content="ru"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="ru"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Jest 20: 💖 Delightful Testing &amp; 🏃🏽 Multi-Project-Runner · Jest"><meta data-rh="true" name="description" content="A few months ago we announced Jest 19 which came with major new features and was the biggest Jest release until today. Jest 20 has twice the amount of changes compared to the previous version, features a complete rewrite of the test runner, adds new testing APIs. The new release enables a new level of customization and configuration for projects all while making it effortless to upgrade. Beyond Painless JavaScript Testing, we believe Jest is now delivering a Delightful JavaScript Testing experience. Let&#x27;s take a look at the best new features and changes in depth:"><meta data-rh="true" property="og:description" content="A few months ago we announced Jest 19 which came with major new features and was the biggest Jest release until today. Jest 20 has twice the amount of changes compared to the previous version, features a complete rewrite of the test runner, adds new testing APIs. The new release enables a new level of customization and configuration for projects all while making it effortless to upgrade. Beyond Painless JavaScript Testing, we believe Jest is now delivering a Delightful JavaScript Testing experience. Let&#x27;s take a look at the best new features and changes in depth:"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2017-05-06T00:00:00.000Z"><meta data-rh="true" property="article:author" content="http://twitter.com/cpojer"><link data-rh="true" rel="icon" href="/jest/ru/img/favicon/favicon.ico"><link data-rh="true" rel="canonical" href="https://QubitPi.github.io/jest/ru/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/jest/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" hreflang="en"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/jest/ja/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" hreflang="ja"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/jest/es-ES/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" hreflang="es-ES"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/jest/fr/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" hreflang="fr"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/jest/pt-BR/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" hreflang="pt-BR"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/jest/ro/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" hreflang="ro"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/jest/ru/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" hreflang="ru"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/jest/uk/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" hreflang="uk"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/jest/zh-Hans/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://QubitPi.github.io/jest/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HP439UUSOL-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/jest/ru/blog/rss.xml" title="Jest RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/jest/ru/blog/atom.xml" title="Jest Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44373548-17"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-44373548-17",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Jest" href="/jest/ru/opensearch.xml">

<link rel="icon" href="/jest/ru/img/jest.png">
<link rel="manifest" href="/jest/ru/manifest.json">
<meta name="theme-color" content="#FFF">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#000">
<link rel="apple-touch-icon" href="/jest/ru/img/jest.png">
<link rel="mask-icon" href="/jest/ru/img/jest.svg" color="#15c213">
<meta name="msapplication-TileImage" content="/jest/ru/img/jest.png">
<meta name="msapplication-TileColor" content="#000"><link rel="stylesheet" href="/jest/ru/assets/css/styles.51be63b7.css">
<link rel="preload" href="/jest/ru/assets/js/runtime~main.4ad75309.js" as="script">
<link rel="preload" href="/jest/ru/assets/js/main.c68060aa.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Перейти к основному содержимому"><a class="skipToContent_oPtH" href="#docusaurus_skipToContent_fallback">Перейти к основному содержимому</a></div><div class="announcementBar_zJRd" style="background-color:#20232a;color:#fff" role="banner"><div class="content_bSb_ announcementBarContent_t7IR">Support Ukraine 🇺🇦 <a target="_blank" rel="noopener noreferrer" href="https://opensource.facebook.com/support-ukraine"> Help Provide Humanitarian Aid to Ukraine</a>.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Переключить навигационную панель" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/jest/ru/"><b class="navbar__title text--truncate">Jest</b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/jest/ru/docs/getting-started">29.5</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/jest/ru/docs/next/getting-started">Next</a></li><li><a class="dropdown__link" href="/jest/ru/docs/getting-started">29.5</a></li><li><a class="dropdown__link" href="/jest/ru/docs/29.4/getting-started">29.4</a></li><li><a class="dropdown__link" href="/jest/ru/docs/29.3/getting-started">29.3</a></li><li><a class="dropdown__link" href="/jest/ru/docs/29.2/getting-started">29.2</a></li><li><a class="dropdown__link" href="/jest/ru/docs/29.1/getting-started">29.1</a></li><li><a class="dropdown__link" href="/jest/ru/docs/29.0/getting-started">29.0</a></li><li><a class="dropdown__link" href="/jest/ru/docs/28.x/getting-started">28.x</a></li><li><a class="dropdown__link" href="/jest/ru/docs/27.x/getting-started">27.x</a></li><li><a class="dropdown__link" href="/jest/ru/docs/26.x/getting-started">26.x</a></li><li><a class="dropdown__link" href="/jest/ru/docs/25.x/getting-started">25.x</a></li><li><a href="https://archive.jestjs.io/docs/en/24.x/getting-started.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">24.x</a></li><li><a href="https://archive.jestjs.io/docs/en/23.x/getting-started.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">23.x</a></li><li><a href="https://archive.jestjs.io/docs/en/22.x/getting-started.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">22.x</a></li><li><a class="dropdown__link" href="/jest/ru/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/jest/ru/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/jest/ru/docs/api">API</a><a class="navbar__item navbar__link" href="/jest/ru/help">Help</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/jest/ru/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_kvP7"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>Русский</a><ul class="dropdown__menu"><li><a href="/jest/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/jest/ja/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ja">日本語</a></li><li><a href="/jest/es-ES/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es-ES">Español</a></li><li><a href="/jest/fr/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="fr">Français</a></li><li><a href="/jest/pt-BR/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="pt-BR">Português (Brasil)</a></li><li><a href="/jest/ro/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="ro">Română</a></li><li><a href="/jest/ru/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="ru">Русский</a></li><li><a href="/jest/uk/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="uk">Українська</a></li><li><a href="/jest/zh-Hans/blog/2017/05/06/jest-20-delightful-testing-multi-project-runner" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://github.com/facebook/jest" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_ki11 colorModeToggle_Hewu"><button class="clean-btn toggleButton_MMFG toggleButtonDisabled_Uw7m" type="button" disabled="" title="Переключение между темным и светлым режимом (сейчас используется Светлый режим)" aria-label="Переключение между темным и светлым режимом (сейчас используется Светлый режим)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_lgto"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_U96C"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_WqAV"><button type="button" class="DocSearch DocSearch-Button" aria-label="Поиск"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Поиск</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_MB5r"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_CLW8 thin-scrollbar" aria-label="Навигация по последним постам в блоге"><div class="sidebarItemTitle_DQfJ margin-bottom--md">Recent posts</div><ul class="sidebarItemList_rvuc clean-list"><li class="sidebarItem__RMN"><a class="sidebarItemLink_Ony9" href="/jest/ru/blog/2022/08/25/jest-29">Jest 29: Snapshot format changes</a></li><li class="sidebarItem__RMN"><a class="sidebarItemLink_Ony9" href="/jest/ru/blog/2022/05/11/jest-joins-openjs">Jest joins OpenJS Foundation</a></li><li class="sidebarItem__RMN"><a class="sidebarItemLink_Ony9" href="/jest/ru/blog/2022/04/25/jest-28">Jest 28: Shedding weight and improving compatibility 🫶</a></li><li class="sidebarItem__RMN"><a class="sidebarItemLink_Ony9" href="/jest/ru/blog/2021/05/25/jest-27">Jest 27: New Defaults for Jest, 2021 edition ⏩</a></li><li class="sidebarItem__RMN"><a class="sidebarItemLink_Ony9" href="/jest/ru/blog/2021/03/09/jest-website-upgrade">Jest Website Upgrade</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_Kdtz" itemprop="headline">Jest 20: 💖 Delightful Testing &amp; 🏃🏽 Multi-Project-Runner</h1><div class="container_iZB2 margin-vert--md"><time datetime="2017-05-06T00:00:00.000Z" itemprop="datePublished">6 мая 2017 г.</time> · <!-- -->7 мин. чтения</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_v1VX"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="http://twitter.com/cpojer" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Christoph Nakazawa</span></a></div></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>A few months ago we announced <a href="/jest/ru/blog/2017/02/21/jest-19-immersive-watch-mode-test-platform-improvements">Jest 19</a> which came with major new features and was the biggest Jest release until today. Jest 20 has twice the amount of changes compared to the previous version, features a complete rewrite of the test runner, adds new testing APIs. The new release enables a new level of customization and configuration for projects all while making it effortless to upgrade. Beyond Painless JavaScript Testing, we believe Jest is now delivering a <strong>Delightful JavaScript Testing experience</strong>. Let&#x27;s take a look at the best new features and changes in depth:</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="multi-project-runner--configuration-overhaul">Multi-Project-Runner &amp; Configuration Overhaul<a href="#multi-project-runner--configuration-overhaul" class="hash-link" aria-label="Прямая ссылка на Multi-Project-Runner &amp; Configuration Overhaul" title="Прямая ссылка на Multi-Project-Runner &amp; Configuration Overhaul">​</a></h2><p>Until now, Jest could only operate in one project at a time. This is often cumbersome if you are working on many smaller projects that each have their own setup and configuration. With Jest 20, we rewrote the test runner completely to run many projects at the same time within a single instance of Jest, for example if you are working on a React frontend and a node.js backend. Here is a video of Jest running tests for <a href="https://github.com/facebook/react" target="_blank" rel="noopener noreferrer">React</a>, <a href="https://github.com/facebook/relay" target="_blank" rel="noopener noreferrer">Relay</a>, <a href="https://github.com/yarnpkg/yarn" target="_blank" rel="noopener noreferrer">Yarn</a> and Jest all at the same time:</p><p><img loading="lazy" alt="multi-runner" src="/jest/ru/assets/images/20-multi-runner-bca686433b2cb63c147951eedce67538.gif" width="839" height="520" class="img_SS3x"></p><p>Jest is now collapsing the usage guide after the first test run to save vertical space in the terminal.</p><p>Further, we completely overhauled how the configuration system works inside of Jest. You can now pass any configuration option through the CLI to overwrite the ones specified in your configuration file. Along with that, we changed Jest to look for a <code>jest.config.js</code> file by default which means you are now able to define a Jest configuration using JavaScript as well as being able to configure it through <code>package.json</code> like before. Through the addition of all these new features, you are now able to combine Jest in more powerful ways than ever before. For example, if you would like to find out which tests Jest would run given a set of changed files from a commit across multiple projects in a monorepo, you can combine cli arguments like this now:</p><div class="language-bash codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f6f6"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-bash codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token plain">$ jest --projects projectA projectB --listTests --findRelatedTests projectA/banana.js projectB/kiwi.js</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#c21325">&quot;projectA/banana.test.js&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#c21325">&quot;projectB/kiwi.test.js&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#c21325">&quot;projectB/pineapple.test.js&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Скопировать в буфер обмена" title="Скопировать" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is especially useful for continuous integration (CI) systems where you may want to only run a subset of tests for Pull Requests to prevent Jest from running thousands of test files on every small change.</p><p>Finally, we are now properly mapping code coverage when using TypeScript and we are running code coverage for untested files in worker processes which yields significant speed ups for this feature.</p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="new--improved-testing-apis">New &amp; Improved Testing APIs<a href="#new--improved-testing-apis" class="hash-link" aria-label="Прямая ссылка на New &amp; Improved Testing APIs" title="Прямая ссылка на New &amp; Improved Testing APIs">​</a></h2><p>We made a number of additions and improvements to the testing APIs which will help write more effective tests. We&#x27;d like to point out that all of these improvements were made entirely by community members!</p><ul><li><strong>Better async testing:</strong> Added new async/Promise support through resolves/rejects modifiers on expect: <code>expect(Promise(…)).resolves.toEqual(…)</code>. <a href="/jest/ru/docs/expect#resolves">See documentation</a>.</li><li><strong>Expect <code>n</code> assertions:</strong> Along with the existing <code>expect.assertions(n)</code>, the new <code>expect.hasAssertions()</code> can be used to ensure a test has at least one assertion.</li><li><strong>Lint Plugin:</strong> A <code>valid-expect</code> rule was added to <code>eslint-plugin-jest</code> to ensure that an assertion is called after invoking <code>expect</code>. This will prevent mistakes like a stray <code>expect(banana);</code> with a missing assertion call.</li><li><strong>Pretty-Format Plugins:</strong> A number of new pretty-format plugins were added to Jest. We now pretty-print <a href="https://github.com/facebook/immutable-js/" target="_blank" rel="noopener noreferrer">Immutable.js</a> data structures and HtmlElements in assertion failures and snapshots.</li><li><strong>Custom Environment:</strong> It is now possible to add a <code>@jest-environment node|jsdom</code> annotation to the doc-block comment of a test file to use a test environment different from the default for individual tests.</li></ul><p>Here is an example of all how all the new APIs together will make testing more delightful:</p><div class="language-js codeBlockContainer_mQmQ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f6f6"><div class="codeBlockContent_D5yF"><pre tabindex="0" class="prism-code language-js codeBlock_RMoD thin-scrollbar"><code class="codeBlockLines_AclH"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> * @jest-environment node</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"> */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#6b2e85">test</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#c21325">&#x27;compares apples and bananas&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#297a29">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#888">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  expect</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#6b2e85">hasAssertions</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Ensure this test has at least one assertion.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#297a29">await</span><span class="token plain"> </span><span class="token function" style="color:#6b2e85">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#6b2e85">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Immutable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token known-class-name class-name">Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#82772c">apples</span><span class="token operator" style="color:#888">:</span><span class="token plain"> </span><span class="token number" style="color:#1373c2">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#82772c">bananas</span><span class="token operator" style="color:#888">:</span><span class="token plain"> </span><span class="token number" style="color:#1373c2">2</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">resolves</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#6b2e85">toEqual</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Immutable</span><span class="token punctuation" style="color:#393A34">.</span><span class="token known-class-name class-name">Map</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token literal-property property" style="color:#82772c">apples</span><span class="token operator" style="color:#888">:</span><span class="token plain"> </span><span class="token number" style="color:#1373c2">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#82772c">bananas</span><span class="token operator" style="color:#888">:</span><span class="token plain"> </span><span class="token number" style="color:#1373c2">3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#6b2e85">expect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#c21325">&#x27;banana&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// valid-expect in eslint-plugin-jest will show an error.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup_aaMX"><button type="button" aria-label="Скопировать в буфер обмена" title="Скопировать" class="clean-btn"><span class="copyButtonIcons_z5j7" aria-hidden="true"><svg class="copyButtonIcon_FoOz" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_L0B6" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This example will print a test failure similar to this:</p><p><img loading="lazy" alt="testing-apis" src="/jest/ru/assets/images/20-testing-apis-d1ff5d93e72e0aedc768bd40bd179e96.png" width="2164" height="1638" class="img_SS3x"></p><h2 class="anchor anchorWithStickyNavbar_JmGV" id="breaking-changes">Breaking Changes<a href="#breaking-changes" class="hash-link" aria-label="Прямая ссылка на Breaking Changes" title="Прямая ссылка на Breaking Changes">​</a></h2><p>As with every major release, we are making a number of breaking changes to make larger changes in the future possible and to push the testing experience to a new level. This time, we tried our best to only break APIs that we don&#x27;t expect to affect the majority of Jest&#x27;s users:</p><ul><li><strong>Fork of Jasmine 2.5:</strong> We finally decided to fork Jasmine itself and take ownership over Jest&#x27;s own test runner. This will allow us to improve all aspects of the unit testing experience in the future but for now we are focused on incremental rewrites and reducing the API surface. If you see a test breaking as a result of a Jasmine API that is now missing, there should be an equivalent feature on the <code>jest</code> or <code>expect</code> objects. As such, we have removed many Jasmine features that aren&#x27;t generally used in most codebases.</li><li><strong>New Snapshots on CI:</strong> Snapshots must always be committed along with the test and the modules they are testing. We changed Jest to not save new snapshots automatically in Continuous Integration (CI) environments or when the <code>--ci</code> flag is specified. To overwrite this behavior, which is generally not recommended, the <code>--updateSnapshot</code> flag can be used.</li><li><strong>Babel-Polyfill:</strong> Jest used to load <code>babel-polyfill</code> automatically when using babel-jest which resulted in memory leaks inside of Jest. In most versions of node, it is not necessary to load <code>babel-polyfill</code> so we removed this auto-inclusion and instead changed Jest to only include <code>regenerator-runtime</code> by default, which is commonly used to support async/await in older versions of Node.js. If you need <code>babel-polyfill</code>, you can manually require it in your setup files.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="other-improvements">Other Improvements<a href="#other-improvements" class="hash-link" aria-label="Прямая ссылка на Other Improvements" title="Прямая ссылка на Other Improvements">​</a></h2><ul><li><strong>Documentation:</strong> Documentation is critical to share best practices and teach everyone how to write effective tests which will lead to better software. Over the last few weeks we have also expanded Jest&#x27;s documentation to include a Snapshot Testing FAQ, a guide with information about how to use Jest with common JavaScript libraries as well as we documented the new features mentioned above.</li><li><strong>Translations:</strong> We are now asking for your help to <a href="https://crowdin.com/project/jest-v2" target="_blank" rel="noopener noreferrer">translate the Jest documentation</a> to make it easier for people to learn how to use Jest.</li><li><strong>Custom Reporters:</strong> Jest now supports custom test reporters through the <code>reporters</code> configuration option. You can finally customize the output of Jest as well as integrate it with other tools by generating reports in formats such as XML. <a href="/jest/ru/docs/configuration#reporters-array-modulename-modulename-options">See documentation</a>.</li><li><strong>Codebase Health:</strong> It was only possible iterate so quickly in Jest because we spent a significant amount of time on the health of the codebase. We were one of the early adopters of <a href="https://github.com/prettier/prettier" target="_blank" rel="noopener noreferrer">prettier</a>, we notably increased flow coverage, forked Jasmine to improve our test runner library and we rewrote and refactored significant portions of Jest itself to set up Jest for success in the future.</li><li><strong>Bugfixes:</strong> As always, we made plenty of bugfixes in Jest. The full changelog can be found in the <a href="https://github.com/facebook/jest/blob/main/CHANGELOG.md#jest-2000" target="_blank" rel="noopener noreferrer">Jest repository</a>.</li></ul><h2 class="anchor anchorWithStickyNavbar_JmGV" id="talks-about-jest">Talks about Jest<a href="#talks-about-jest" class="hash-link" aria-label="Прямая ссылка на Talks about Jest" title="Прямая ссылка на Talks about Jest">​</a></h2><p>Recently the Jest core team and other contributors started to talk more about Jest and the experience of working on Jest at conferences:</p><ul><li>Rogelio Guzman did a talk about <a href="https://www.youtube.com/watch?time_continue=416&amp;v=HAuXJVI_bUs" target="_blank" rel="noopener noreferrer">Jest Snapshots and Beyond</a> at React Conf.</li><li>I spoke about <a href="https://developers.facebook.com/videos/f8-2017/building-high-quality-javascript-tools/" target="_blank" rel="noopener noreferrer">Building High-Quality JavaScript Tools</a> at Facebook&#x27;s F8 conference.</li></ul><p><em>As always, this release couldn&#x27;t have been possible without you, the JavaScript community. We are incredibly grateful that we get the opportunity to work on improving JavaScript testing together. If you&#x27;d like to contribute to Jest, please don&#x27;t hesitate to reach out to us on <a href="https://github.com/facebook/jest" target="_blank" rel="noopener noreferrer">GitHub</a> or on <a href="https://discord.gg/j6FKKQQrW9" target="_blank" rel="noopener noreferrer">Discord</a>.</em></p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_JgJa"><div class="col margin-top--sm"><a href="https://github.com/facebook/jest/tree/main/website/blog/2017-05-06-jest-20-delightful-testing-multi-project-runner.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_bHB7" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Отредактировать эту страницу</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Навигация по странице поста блога"><a class="pagination-nav__link pagination-nav__link--prev" href="/jest/ru/blog/2017/12/18/jest-22"><div class="pagination-nav__sublabel">Следующий пост</div><div class="pagination-nav__label">Jest 22: Refinements &amp; Custom Runners</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/jest/ru/blog/2017/02/21/jest-19-immersive-watch-mode-test-platform-improvements"><div class="pagination-nav__sublabel">Предыдущий пост</div><div class="pagination-nav__label">🃏 Jest 19: Immersive Watch Mode &amp; Test Platform Improvements</div></a></nav></main><div class="col col--2"><div class="tableOfContents_XG6w thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#multi-project-runner--configuration-overhaul" class="table-of-contents__link toc-highlight">Multi-Project-Runner &amp; Configuration Overhaul</a></li><li><a href="#new--improved-testing-apis" class="table-of-contents__link toc-highlight">New &amp; Improved Testing APIs</a></li><li><a href="#breaking-changes" class="table-of-contents__link toc-highlight">Breaking Changes</a></li><li><a href="#other-improvements" class="table-of-contents__link toc-highlight">Other Improvements</a></li><li><a href="#talks-about-jest" class="table-of-contents__link toc-highlight">Talks about Jest</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/jest/ru/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/jest/ru/docs/snapshot-testing">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/jest/ru/docs/api">API Reference</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/jestjs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.reactiflux.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reactiflux<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/fbjest" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/jest/ru/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/jest" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/fbjest" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPrP"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" rel="noopener noreferrer" class="footerLogoLink_tutC"><img src="/jest/ru/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_BQGR themedImage--light_HAxW footer__logo"><img src="/jest/ru/img/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_BQGR themedImage--dark_bGx0 footer__logo"></a></div><div class="footer__copyright">Copyright © 2023 Meta Platforms, Inc. and affiliates. Built with Docusaurus.</div></div></div></footer></div>
<script src="/jest/ru/assets/js/runtime~main.4ad75309.js"></script>
<script src="/jest/ru/assets/js/main.c68060aa.js"></script>
</body>
</html>